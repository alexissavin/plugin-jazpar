<div class="eqLogic eqLogic-widget allowResize #eqType#" style="width: #width#;height: #height#;#style#" data-eqLogic_id="#id#" data-eqLogic_uid="#uid#" data-version="#version#" data-eqType="#eqType#" data-translate-category="#translate_category#" data-category="#category#" data-tags="#tags#" >
    <link rel="stylesheet" href="plugins/jazpar/data/css/jazpar2.template.css"/>
	<center class="widget-name">
		<span class="warning" title="#alert_name#">
			<i class='#alert_icon#'></i>
		</span>
		<span class="cmd refresh pull-right cursor" data-cmd_id="#refresh_id#">
			<i class="fas fa-sync"></i>
		</span>
		<span class="reportModeVisible">#name_display# <span class="object_name">#object_name#</span></span>
		<a href="#eqLink#" class="reportModeHidden">#name_display# <span class="object_name">#object_name#</span></a>
	</center>
      <div class="jazpar_template text-center">
           <div class="history cursor kwh" data-cmd_id="#consom_id#" title="#consom_collect#" style="padding-top:25%;">
                <div class="jazparCdc">MOIS EN COURS</div>
                <div class="jazparValueUnite"><span class="jazparValue">#consom#</span><span class="jazparUnite"> kWh</span></div>
           </div>
           <div class="history cursor m3" data-cmd_id="#consom3_id#" title="#consom3_collect#" style="display: none; padding-top:25%;">
              <div class="jazparCdc">MOIS EN COURS</div>
              <div class="jazparValueUnite"><span class="jazparValue">#consom3#</span><span class="jazparUnite"> m3</span></div>
          </div>
          <div class="history cursor kwh" data-cmd_id="#consod_id#" title="#consod_collect#">
              <div class="jazparCdc">VEILLE</div>
              <div class="jazparValueUnite"><span class="jazparValue">#consod#</span><span class="jazparUnite" > kWh</span></div>
          </div>
          <div class="history cursor m3" data-cmd_id="#consod3_id#" title="#consod3_collect#" style="display: none;">
              <div class="jazparCdc">VEILLE</div>
              <div class="jazparValueUnite"><span class="jazparValue">#consod3#</span><span class="jazparUnite"> m3</span></div>
          </div>
     </div>
     <div>
        <span class="switch">kWh/m3</span>
    </div>
	<script>
        var unit = "khw";
        setUnit(unit, false);
		if ('#refresh_id#' != ''){
			$('.eqLogic[data-eqLogic_uid=#uid#] .refresh').on('click', function () {
				jeedom.cmd.execute({id: '#refresh_id#'});
			});
		}else{
			$('.eqLogic[data-eqLogic_uid=#uid#] .refresh').remove();
		}
        $('.eqLogic[data-eqLogic_uid=#uid#] .switch').on('click', function () {
            setUnit(unit, true);
        });
        var eqLogic = $('.eqLogic[data-eqLogic_uid=#uid#]');
        var eqlogic_width = eqLogic.width();
        var LinkyScreen_width = eqLogic.find('.jazpar_template').width();
        eqLogic.find('.jazparEqlogicName').attr('style', 'font-size :' + (eqlogic_width*0.13)+'px !important');
        eqLogic.find('.jazparCdc').css('font-size', (LinkyScreen_width*0.10)+'px');
        eqLogic.find('.jazparValue').css('font-size', (LinkyScreen_width*0.12)+'px');
        eqLogic.find('.jazparUnite').css('font-size', (LinkyScreen_width*0.08)+'px');
        
        function setUnit(theUnit, isSwitch) {
            var toSet = "";
            var toUnset = "";
            if (theUnit == "m3") {
                toSet = "m3";
                toUnset = "khw";
            } else {
                toSet = "khw";
                toUnset = "m3";
            }
            if (isSwitch) {
                var temp = toSet;
                toSet = toUnset;
                toUnset = temp;
            }
            $('.eqLogic[data-eqLogic_uid=#uid#] .' + toSet).show();
            $('.eqLogic[data-eqLogic_uid=#uid#] .' + toUnset).hide();
            unit = toSet;
        }
    </script> 
 </div>



